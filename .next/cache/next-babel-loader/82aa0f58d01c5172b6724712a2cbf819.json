{"ast":null,"code":"\"use strict\";\n\nvar _mongodb = _interopRequireDefault(require(\"../../middleware/mongodb.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nmodule.exports = async (req, res) => {\n  if (req.query.lat != null && req.query.lng != null) {\n    let querry_lat = parseFloat(req.query.lat);\n    let querry_lng = parseFloat(req.query.lng);\n    let delta = req.query.delta != null ? req.query.delta : 0.02;\n    const db = await (0, _mongodb.default)();\n    const collection = await db.collection('stores2');\n    const stores = await collection.find({\n      lat: {\n        $gt: querry_lat - delta,\n        $lt: querry_lat + delta\n      },\n      lng: {\n        $gt: querry_lng - delta,\n        $lt: querry_lng + delta\n      }\n    }).limit(5).toArray();\n    res.status(200).json({\n      stores: null\n    });\n  } else {\n    res.status(400).json({\n      error: \"missing parameters\"\n    });\n  }\n};","map":{"version":3,"sources":["/home/crmock/pideenlaequina/front/pages/api/featuredStores.js"],"names":["module","exports","req","res","query","lat","lng","querry_lat","parseFloat","querry_lng","delta","db","collection","stores","find","$gt","$lt","limit","toArray","status","json","error"],"mappings":";;AAAA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACnC,MAAID,GAAG,CAACE,KAAJ,CAAUC,GAAV,IAAiB,IAAjB,IAAyBH,GAAG,CAACE,KAAJ,CAAUE,GAAV,IAAiB,IAA9C,EAAoD;AAClD,QAAIC,UAAU,GAAGC,UAAU,CAACN,GAAG,CAACE,KAAJ,CAAUC,GAAX,CAA3B;AACA,QAAII,UAAU,GAAGD,UAAU,CAACN,GAAG,CAACE,KAAJ,CAAUE,GAAX,CAA3B;AACA,QAAII,KAAK,GAAIR,GAAG,CAACE,KAAJ,CAAUM,KAAV,IAAmB,IAAnB,GAAyBR,GAAG,CAACE,KAAJ,CAAUM,KAAnC,GAA2C,IAAxD;AAEA,UAAMC,EAAE,GAAG,MAAM,uBAAjB;AACA,UAAMC,UAAU,GAAG,MAAMD,EAAE,CAACC,UAAH,CAAc,SAAd,CAAzB;AAEA,UAAMC,MAAM,GAAG,MAAMD,UAAU,CAACE,IAAX,CAAgB;AACnCT,MAAAA,GAAG,EAAE;AAAEU,QAAAA,GAAG,EAAER,UAAU,GAAGG,KAApB;AAA2BM,QAAAA,GAAG,EAAET,UAAU,GAAGG;AAA7C,OAD8B;AAEnCJ,MAAAA,GAAG,EAAE;AAAES,QAAAA,GAAG,EAAEN,UAAU,GAAGC,KAApB;AAA2BM,QAAAA,GAAG,EAAEP,UAAU,GAAGC;AAA7C;AAF8B,KAAhB,EAGlBO,KAHkB,CAGZ,CAHY,EAGTC,OAHS,EAArB;AAKAf,IAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEP,MAAAA,MAAM,EAAC;AAAT,KAArB;AACD,GAdD,MAeK;AACHV,IAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,KAAK,EAAE;AAAT,KAArB;AACD;AACF,CAnBD","sourcesContent":["import Database from '../../middleware/mongodb.js'\n\nmodule.exports = async (req, res) => {\n  if (req.query.lat != null && req.query.lng != null) {\n    let querry_lat = parseFloat(req.query.lat)\n    let querry_lng = parseFloat(req.query.lng)\n    let delta = (req.query.delta != null? req.query.delta : 0.02)\n\n    const db = await Database()\n    const collection = await db.collection('stores2')\n\n    const stores = await collection.find({\n      lat: { $gt: querry_lat - delta, $lt: querry_lat + delta },\n      lng: { $gt: querry_lng - delta, $lt: querry_lng + delta }\n    }).limit(5).toArray()\n\n    res.status(200).json({ stores:null })\n  }\n  else {\n    res.status(400).json({ error: \"missing parameters\" })\n  }\n}"]},"metadata":{},"sourceType":"script"}