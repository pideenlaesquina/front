{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/crmock/pideenlaequina/front/components/SearchCard.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport distance from './Distance';\nimport Dialog from '@material-ui/core/Dialog';\nimport Fab from '@material-ui/core/Fab';\nimport Chip from '@material-ui/core/Chip';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport HistoryIcon from '@material-ui/icons/History';\n\nvar SearchCard = /*#__PURE__*/function (_Component) {\n  _inherits(SearchCard, _Component);\n\n  var _super = _createSuper(SearchCard);\n\n  function SearchCard(props) {\n    var _this;\n\n    _classCallCheck(this, SearchCard);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      storesToShow: [],\n      selectAll: false,\n      updateNeeded: false,\n      onlyFavorites: false,\n      onlyHistory: false,\n      categories: [{\n        type: 'pharmacy',\n        name: \"Droguería\",\n        selected: true\n      }, {\n        type: 'bakery',\n        name: \"Panadería\",\n        selected: true\n      }, {\n        type: 'vegetableStore',\n        name: \"Fruver\",\n        selected: true\n      }, {\n        type: 'hardwareStore',\n        name: \"Ferretería\",\n        selected: true\n      }, {\n        type: 'butchery',\n        name: \"Carnicería\",\n        selected: true\n      }, {\n        type: 'drycleaner',\n        name: \"Lavandería\",\n        selected: true\n      }, {\n        type: 'stationeryStore',\n        name: \"Papelería\",\n        selected: true\n      }, {\n        type: 'petStore',\n        name: \"Mascotas\",\n        selected: true\n      }, {\n        type: 'liquorStore',\n        name: \"Licores\",\n        selected: true\n      }, {\n        type: 'fastFood',\n        name: \"Comida Rápida\",\n        selected: true\n      }, {\n        type: 'restaurant',\n        name: \"Restaurante\",\n        selected: true\n      }, {\n        type: 'store',\n        name: \"Tienda\",\n        selected: true\n      }, {\n        type: 'groeceryStore',\n        name: \"Supermercado\",\n        selected: true\n      }]\n    };\n    return _this;\n  }\n\n  _createClass(SearchCard, [{\n    key: \"handleChipClick\",\n    value: function handleChipClick(index) {\n      var newCategories = JSON.parse(JSON.stringify(this.state.categories));\n\n      if (newCategories[index].selected) {\n        newCategories[index].selected = false;\n      } else {\n        newCategories[index].selected = true;\n      }\n\n      this.setState({\n        categories: newCategories\n      });\n    }\n  }, {\n    key: \"handleSelectAllClick\",\n    value: function handleSelectAllClick() {\n      var newCategories = JSON.parse(JSON.stringify(this.state.categories));\n      var newSelectAll = JSON.parse(JSON.stringify(this.state.selectAll));\n\n      if (this.state.selectAll) {\n        for (var i = 0; i < newCategories.length; i++) {\n          newCategories[i].selected = true;\n        }\n\n        newSelectAll = false;\n      } else {\n        for (var _i = 0; _i < newCategories.length; _i++) {\n          newCategories[_i].selected = false;\n        }\n\n        newSelectAll = true;\n      }\n\n      this.setState({\n        categories: newCategories,\n        selectAll: newSelectAll\n      });\n    }\n  }, {\n    key: \"handleFavoritesOnlyClick\",\n    value: function handleFavoritesOnlyClick(index) {\n      this.setState({\n        onlyFavorites: !this.state.onlyFavorites\n      });\n    }\n  }, {\n    key: \"handleHistoryOnlyClick\",\n    value: function handleHistoryOnlyClick(index) {\n      this.setState({\n        onlyHistory: !this.state.onlyHistory\n      });\n    }\n  }, {\n    key: \"activeCategories\",\n    value: function activeCategories() {\n      return [];\n    }\n  }, {\n    key: \"updateStoreList\",\n    value: function updateStoreList() {\n      var activeCategories = this.activeCategories();\n      var newStoresToShow = [];\n\n      for (var i = 0; i < this.props.stores.length; i++) {\n        var element = this.props.stores[i];\n        var mustBeIncluded = true;\n\n        if (activeCategories.includes(element.type)) {\n          mustBeIncluded = false;\n        }\n\n        if (!mustBeIncluded && this.state.onlyFavorites) {\n          if (!this.props.favoriteStores.includes(element.id)) {\n            mustBeIncluded = false;\n          }\n        }\n\n        if (!mustBeIncluded && this.state.onlyHistory) {\n          if (!this.props.historyStores.includes(element.id)) {\n            mustBeIncluded = false;\n          }\n        }\n\n        newStoresToShow.push(element);\n      }\n\n      this.setState({\n        updateNeeded: false,\n        storesToShow: newStoresToShow\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      console.log(JSON.stringify(prevState.categories));\n      console.log(JSON.stringify(this.state.categories));\n\n      if (JSON.stringify(prevState.categories) !== JSON.stringify(this.state.categories) || prevState.onlyHistory !== this.state.onlyHistory || prevState.onlyFavorites !== this.state.onlyFavorites) {\n        this.setState({\n          updateNeeded: true\n        });\n      }\n\n      if (this.state.updateNeeded) {\n        this.updateStoreList();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 7\n        }\n      }, this.props.stores && __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 36\n        }\n      }, __jsx(Dialog, {\n        \"aria-labelledby\": \"simple-dialog-title\",\n        open: this.props.open,\n        fullScreen: true,\n        style: {\n          height: \"100%\",\n          position: \"relative\",\n          background: '#ffcf02'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 9\n        }\n      }, __jsx(\"div\", {\n        style: {\n          height: '100%',\n          background: 'lightgrey'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }\n      }), __jsx(\"div\", {\n        style: {\n          display: 'relative'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }\n      }, __jsx(Fab, {\n        size: \"small\",\n        \"aria-label\": \"menu\",\n        onClick: function onClick() {\n          return _this2.props.close();\n        },\n        style: {\n          position: \"absolute\",\n          top: \"10px\",\n          left: \"15px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 15\n        }\n      }, __jsx(ArrowBackIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 17\n        }\n      })), __jsx(\"div\", {\n        style: {\n          margin: '10px',\n          textAlign: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 15\n        }\n      }, __jsx(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }\n      }, \"Selecciona una tienda en el mapa\"), __jsx(\"h4\", {\n        style: {\n          marginBottom: '0'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }\n      }, \"Filtros\"), __jsx(Chip, {\n        variant: this.state.onlyFavorites ? \"default\" : \"outlined\",\n        size: \"small\",\n        label: \"Solo favoritos\",\n        color: \"secondary\",\n        clickable: true,\n        icon: __jsx(FavoriteIcon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }\n        }),\n        onClick: function onClick() {\n          return _this2.handleFavoritesOnlyClick();\n        },\n        style: {\n          marginTop: '10px',\n          marginBottom: '10px',\n          marginRight: '2px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 17\n        }\n      }), __jsx(Chip, {\n        variant: this.state.onlyHistory ? \"default\" : \"outlined\",\n        size: \"small\",\n        label: \"Pedidos anteriores\",\n        clickable: true,\n        icon: __jsx(HistoryIcon, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 25\n          }\n        }),\n        onClick: function onClick() {\n          return _this2.handleHistoryOnlyClick();\n        },\n        style: {\n          marginTop: '10px',\n          marginBottom: '10px',\n          marginLeft: '2px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 17\n        }\n      }), __jsx(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 17\n        }\n      }), this.state.categories.map(function (item, index) {\n        return __jsx(Chip, {\n          key: item.type,\n          variant: item.selected ? \"default\" : \"outlined\",\n          size: \"small\",\n          label: item.name,\n          clickable: true,\n          color: \"primary\",\n          onClick: function onClick() {\n            return _this2.handleChipClick(index);\n          },\n          style: {\n            margin: '2px'\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 19\n          }\n        });\n      }), __jsx(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 17\n        }\n      }), __jsx(Chip, {\n        size: \"small\",\n        label: \"Seleccionar todo/ninguno\",\n        clickable: true,\n        color: \"default\",\n        onClick: function onClick() {\n          return _this2.handleSelectAllClick();\n        },\n        style: {\n          margin: '8px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 17\n        }\n      }))))));\n    }\n  }]);\n\n  return SearchCard;\n}(Component);\n\nexport default SearchCard;","map":{"version":3,"sources":["/home/crmock/pideenlaequina/front/components/SearchCard.js"],"names":["React","Component","distance","Dialog","Fab","Chip","ArrowBackIcon","FavoriteIcon","HistoryIcon","SearchCard","props","state","storesToShow","selectAll","updateNeeded","onlyFavorites","onlyHistory","categories","type","name","selected","index","newCategories","JSON","parse","stringify","setState","newSelectAll","i","length","activeCategories","newStoresToShow","stores","element","mustBeIncluded","includes","favoriteStores","id","historyStores","push","prevProps","prevState","console","log","updateStoreList","open","height","position","background","display","close","top","left","margin","textAlign","marginBottom","handleFavoritesOnlyClick","marginTop","marginRight","handleHistoryOnlyClick","marginLeft","map","item","handleChipClick","handleSelectAllClick"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport distance from './Distance'\n\nimport Dialog from '@material-ui/core/Dialog'\nimport Fab from '@material-ui/core/Fab'\nimport Chip from '@material-ui/core/Chip'\n\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport FavoriteIcon from '@material-ui/icons/Favorite'\nimport HistoryIcon from '@material-ui/icons/History'\n\nclass SearchCard extends Component {\n  \n  constructor(props)\n  {\n    super(props)\n    this.state={\n      storesToShow:[],\n      selectAll:false,\n      updateNeeded:false,\n      onlyFavorites:false,\n      onlyHistory:false,\n      categories: [\n        {type:'pharmacy', name:\"Droguería\", selected:true},\n        {type:'bakery', name:\"Panadería\", selected:true},\n        {type:'vegetableStore', name:\"Fruver\", selected:true},\n        {type:'hardwareStore', name:\"Ferretería\", selected:true},\n        {type:'butchery', name:\"Carnicería\", selected:true},\n        {type:'drycleaner', name:\"Lavandería\", selected:true},\n        {type:'stationeryStore', name:\"Papelería\", selected:true},\n        {type:'petStore', name:\"Mascotas\", selected:true},\n        {type:'liquorStore', name:\"Licores\", selected:true},\n        {type:'fastFood', name:\"Comida Rápida\", selected:true},\n        {type:'restaurant', name:\"Restaurante\", selected:true},\n        {type:'store', name:\"Tienda\", selected:true},\n        {type:'groeceryStore', name:\"Supermercado\", selected:true}\n      ]\n    }\n  }\n\n  handleChipClick(index)\n  {\n    let newCategories = JSON.parse(JSON.stringify(this.state.categories))\n    if(newCategories[index].selected)\n    {\n      newCategories[index].selected = false\n    }\n    else\n    {\n      newCategories[index].selected = true\n    }\n    this.setState({categories:newCategories})\n  }\n\n  handleSelectAllClick()\n  {\n    let newCategories = JSON.parse(JSON.stringify(this.state.categories))\n    let newSelectAll = JSON.parse(JSON.stringify(this.state.selectAll))\n\n    if(this.state.selectAll)\n    {\n      for (let i = 0; i < newCategories.length; i++) {\n        newCategories[i].selected=true \n      }\n      newSelectAll=false\n    }\n    else\n    {\n      for (let i = 0; i < newCategories.length; i++) {\n        newCategories[i].selected=false\n      }\n      newSelectAll=true\n    }\n\n    this.setState({categories:newCategories, selectAll:newSelectAll})\n  }\n\n  handleFavoritesOnlyClick(index)\n  {\n    this.setState({onlyFavorites:!this.state.onlyFavorites})\n  }\n\n  handleHistoryOnlyClick(index)\n  {\n    this.setState({onlyHistory:!this.state.onlyHistory})\n  }\n\n  activeCategories()\n  {\n    return []\n  }\n\n  updateStoreList()\n  {\n    let activeCategories = this.activeCategories()\n\n    let newStoresToShow = []\n    for (let i = 0; i < this.props.stores.length; i++) {\n      const element = this.props.stores[i];\n      let mustBeIncluded = true\n      if(activeCategories.includes(element.type))\n      {\n        mustBeIncluded = false\n      }\n\n      if(!mustBeIncluded && this.state.onlyFavorites)\n      {\n        if(!this.props.favoriteStores.includes(element.id))\n        {\n          mustBeIncluded = false\n        }\n      }\n\n      if(!mustBeIncluded && this.state.onlyHistory)\n      {\n        if(!this.props.historyStores.includes(element.id))\n        {\n          mustBeIncluded = false\n        }\n      }\n\n      newStoresToShow.push(element)\n    }\n\n    this.setState({updateNeeded:false, storesToShow: newStoresToShow})\n  }\n\n  componentDidUpdate(prevProps, prevState)\n  {\n    console.log(JSON.stringify(prevState.categories))\n    console.log(JSON.stringify(this.state.categories))\n    if( (JSON.stringify(prevState.categories) !== JSON.stringify(this.state.categories) )\n      || (prevState.onlyHistory !== this.state.onlyHistory)\n      || (prevState.onlyFavorites !== this.state.onlyFavorites)\n    )\n    {\n      this.setState({updateNeeded:true})\n    }\n\n    if(this.state.updateNeeded)\n    {\n      this.updateStoreList()\n    }\n  }\n\n  render() {\n    \n    return (\n      <div>{(this.props.stores && (<div>\n        <Dialog \n          aria-labelledby=\"simple-dialog-title\" \n          open={this.props.open}\n          fullScreen\n          style={{height:\"100%\", position:\"relative\", background:'#ffcf02'}}\n        >\n            <div style={{height:'100%', background:'lightgrey'}}></div>\n\n            <div style={{display:'relative'}}>\n              <Fab size=\"small\" aria-label=\"menu\" onClick={() => this.props.close()} style={{position:\"absolute\", top:\"10px\", left:\"15px\"}}>\n                <ArrowBackIcon />\n              </Fab>\n              \n              <div style={{margin:'10px', textAlign:'center'}}>\n                <h3>Selecciona una tienda en el mapa</h3>\n                <h4 style={{marginBottom:'0'}}>Filtros</h4>\n                <Chip\n                  variant={this.state.onlyFavorites?\"default\":\"outlined\"}\n                  size=\"small\"\n                  label=\"Solo favoritos\"\n                  color=\"secondary\"\n                  clickable\n                  icon={<FavoriteIcon />}\n                  onClick={()=>this.handleFavoritesOnlyClick()}\n                  style={{marginTop:'10px', marginBottom:'10px', marginRight:'2px'}}\n                />\n                <Chip\n                  variant={this.state.onlyHistory?\"default\":\"outlined\"}\n                  size=\"small\"\n                  label=\"Pedidos anteriores\"\n                  clickable\n                  icon={<HistoryIcon />}\n                  onClick={()=>this.handleHistoryOnlyClick()}\n                  style={{marginTop:'10px', marginBottom:'10px', marginLeft:'2px'}}\n                />\n                <br></br>\n                {this.state.categories.map( (item, index) => (\n                  <Chip\n                    key={item.type}\n                    variant={item.selected?\"default\":\"outlined\"}\n                    size=\"small\"\n                    label={item.name}\n                    clickable\n                    color=\"primary\"\n                    onClick={()=>this.handleChipClick(index)}\n                    style={{margin:'2px'}}\n                  />\n                ))}\n                <br></br>\n                <Chip\n                  size=\"small\"\n                  label=\"Seleccionar todo/ninguno\"\n                  clickable\n                  color=\"default\"\n                  onClick={()=>this.handleSelectAllClick()}\n                  style={{margin:'8px'}}\n                />\n              </div>\n            </div>\n        </Dialog>\n      </div>))}\n      </div>\n    )\n  }\n}\n\nexport default SearchCard;\n"]},"metadata":{},"sourceType":"module"}