{"ast":null,"code":"var _jsxFileName = \"/home/crmock/pideenlaequina/front/components/map.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Head from 'next/head';\n\nclass Map extends React.Component {\n  componentDidUpdate() {\n    if (this.map == null) {\n      this.initMap();\n    } else {\n      if (this.props.pos != null && this.props.pos.lng != null && this.props.lat != null) {\n        this.loadMapData(this.props.pos, false);\n      }\n    }\n  }\n\n  initMap() {\n    this.setState({\n      map: new google.maps.Map(document.getElementById('map'), {\n        center: this.props.pos,\n        zoom: 15,\n        mapTypeControl: false,\n        fullscreenControl: false\n      })\n    });\n    this.infoWindow = new google.maps.InfoWindow();\n    this.addMarker(\"user\", pos.lat, pos.lng, \"user\", \"Tu ubicaci贸n\", null, null, null, null);\n  }\n\n  setUserMarker() {\n    if (this.state.userMarker != null) {\n      this.state.userMarker.setMap(null);\n    }\n\n    if (this.map != null) {\n      this.setState({\n        userMarker: new google.maps.Marker({\n          position: this.props.pos,\n          icon: './map/user_icon.svg',\n          title: \"Tu ubicaci贸n\",\n          draggable: false\n        })\n      });\n      this.state.userMarker.setMap(this.state.map);\n      this.map.panTo(this.props.pos);\n    }\n  }\n\n  setStoresMarkers() {\n    if (this.props.stores.lenght == 0) {\n      this.infoWindow.setContent('<div id=\"content\">' + '<h4 id=\"firstHeading\" class=\"firstHeading\">' + marker.name + '</h4>' + '<p>' + marker.address + '</p>' + (marker.aceptsCreditCard ? '<p><i class=\"fa fa-credit-card\"></i> Acepta tarjetas</p>' : \"\") + '<div class=\"map-button-block\">' + '<button class=\"map-button whatsapp\" type=\"submit\" value=\"Write\" onclick=\"writeAction(' + marker.cellphone + ')\"><i class=\"fa fa-whatsapp\"></i> Escribir</button>' + '</div>' + '</div>');\n      this.infoWindow.open(map, this.state.userMarker);\n    } else {\n      for (let i = 0; i < stores.length; i++) {\n        this.addMarker(stores[i].id, stores[i].lat, stores[i].lng, stores[i].type, stores[i].name, stores[i].address, stores[i].cellphone, stores[i].phone, stores[i].aceptsCreditCard);\n      }\n\n      ;\n    }\n  }\n\n  addMarker(id, lat, lng, markerType, name, address, cellphone, phone, aceptsCreditCard) {\n    let icon_normal = './map/store_icon.svg';\n    let icon_hover = './map/store_icon_hover.svg';\n\n    if (markerType != null) {\n      icon_normal = './map/' + markerType.toLowerCase() + \"_icon.svg\";\n      icon_hover = './map/' + markerType.toLowerCase() + \"_icon_hover.svg\";\n    }\n\n    let marker = new google.maps.Marker({\n      position: {\n        lat: lat,\n        lng: lng\n      },\n      icon: icon_normal,\n      title: name,\n      draggable: false,\n      //custom data\n      id: id,\n      name: name,\n      address: address,\n      type: markerType ? markerType.toLowerCase() : null,\n      cellphone: cellphone,\n      phone: phone,\n      aceptsCreditCard: aceptsCreditCard\n    });\n    google.maps.event.addListener(marker, 'click', function () {\n      if (marker.id != \"user\") {\n        this.infoWindow.setContent('<div id=\"content\">' + '<h4 id=\"firstHeading\" class=\"firstHeading\">' + marker.name + '</h4>' + '<p>' + marker.address + '</p>' + (marker.aceptsCreditCard ? '<p><i class=\"fa fa-credit-card\"></i> Acepta tarjetas</p>' : \"\") + '<div class=\"map-button-block\">' + '<button class=\"map-button whatsapp\" type=\"submit\" value=\"Write\" onclick=\"writeAction(' + marker.cellphone + ')\"><i class=\"fa fa-whatsapp\"></i> Escribir</button>' + '</div>' + '</div>');\n        this.infoWindow.open(map, marker);\n      }\n    });\n    google.maps.event.addListener(marker, 'mouseover', function () {\n      marker.setIcon(icon_hover);\n    });\n    google.maps.event.addListener(marker, 'mouseout', function () {\n      marker.setIcon(icon_normal);\n    });\n    marker.setMap(this.map);\n  }\n\n  render() {\n    var customStyle = {\n      padding: \"0\",\n      margin: \"0\",\n      display: 'block',\n      height: '97vh',\n      background: 'WhiteSmoke'\n    };\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 7\n      }\n    }, __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }, __jsx(\"script\", {\n      src: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyBt0ZCE1kAklBJiBnCYGX6kl0tglLcKlLI\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      id: \"map\",\n      style: customStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }\n    }, \"Cargando...\"));\n  }\n\n}\n\nexport default Map;","map":{"version":3,"sources":["/home/crmock/pideenlaequina/front/components/map.js"],"names":["React","ReactDOM","Head","Map","Component","componentDidUpdate","map","initMap","props","pos","lng","lat","loadMapData","setState","google","maps","document","getElementById","center","zoom","mapTypeControl","fullscreenControl","infoWindow","InfoWindow","addMarker","setUserMarker","state","userMarker","setMap","Marker","position","icon","title","draggable","panTo","setStoresMarkers","stores","lenght","setContent","marker","name","address","aceptsCreditCard","cellphone","open","i","length","id","type","phone","markerType","icon_normal","icon_hover","toLowerCase","event","addListener","setIcon","render","customStyle","padding","margin","display","height","background"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Head from 'next/head'\n\nclass Map extends React.Component {\n\n  componentDidUpdate()\n  {\n    if (this.map == null)\n    {\n      this.initMap();\n    }\n    else{\n      if(this.props.pos != null && this.props.pos.lng != null && this.props.lat != null)\n      {\n        this.loadMapData(this.props.pos, false)\n      }\n    }\n  }\n\n  initMap()\n  {\n    this.setState({map: new google.maps.Map(document.getElementById('map'), {\n      center: this.props.pos,\n      zoom: 15,\n      mapTypeControl: false,\n      fullscreenControl: false,\n    })});\n\n    this.infoWindow = new google.maps.InfoWindow();\n\n    this.addMarker(\"user\", pos.lat, pos.lng, \"user\", \"Tu ubicaci贸n\", null, null, null, null);\n\n  }\n\n  setUserMarker()\n  {\n    if(this.state.userMarker != null)\n    {\n      this.state.userMarker.setMap(null);\n    }\n\n    if(this.map != null)\n    {\n      this.setState({userMarker: new google.maps.Marker({\n        position: this.props.pos,\n        icon: './map/user_icon.svg',\n        title: \"Tu ubicaci贸n\",\n        draggable:false,\n      })});\n  \n      this.state.userMarker.setMap(this.state.map);\n      this.map.panTo(this.props.pos);\n    }\n  }\n\n  setStoresMarkers()\n  {\n    if (this.props.stores.lenght == 0)\n    {\n      this.infoWindow.setContent(\n        '<div id=\"content\">'+\n          '<h4 id=\"firstHeading\" class=\"firstHeading\">'+ marker.name +'</h4>'+\n          '<p>'+ marker.address +'</p>'+\n          (marker.aceptsCreditCard?'<p><i class=\"fa fa-credit-card\"></i> Acepta tarjetas</p>':\"\")+\n          '<div class=\"map-button-block\">'+\n            '<button class=\"map-button whatsapp\" type=\"submit\" value=\"Write\" onclick=\"writeAction('+marker.cellphone+')\"><i class=\"fa fa-whatsapp\"></i> Escribir</button>'+\n          '</div>'+\n        '</div>'\n      );\n      this.infoWindow.open(map, this.state.userMarker); \n    }\n    else\n    {\n      for (let i = 0; i < stores.length; i++) {\n        this.addMarker(stores[i].id, stores[i].lat, stores[i].lng, stores[i].type, stores[i].name, stores[i].address, stores[i].cellphone, stores[i].phone, stores[i].aceptsCreditCard);\n      };\n    }\n  }\n\n  addMarker(id,lat, lng, markerType, name, address, cellphone, phone, aceptsCreditCard)\n  {\n    let icon_normal = './map/store_icon.svg';\n    let icon_hover = './map/store_icon_hover.svg';\n\n    if (markerType != null)\n    {\n      icon_normal = './map/' + markerType.toLowerCase() + \"_icon.svg\";\n      icon_hover = './map/' + markerType.toLowerCase() + \"_icon_hover.svg\";\n    }\n\n    let marker = new google.maps.Marker({\n        position: {lat:lat, lng:lng},\n        icon: icon_normal,\n        title:name,\n        draggable:false,\n\n        //custom data\n        id:id,\n        name:name,\n        address:address,\n        type:(markerType?markerType.toLowerCase():null),\n        cellphone:cellphone,\n        phone:phone,\n        aceptsCreditCard: aceptsCreditCard\n    });\n\n    google.maps.event.addListener(marker, 'click', function() {\n      if(marker.id != \"user\")\n      {\n        this.infoWindow.setContent(\n          '<div id=\"content\">'+\n            '<h4 id=\"firstHeading\" class=\"firstHeading\">'+ marker.name +'</h4>'+\n            '<p>'+ marker.address +'</p>'+\n            (marker.aceptsCreditCard?'<p><i class=\"fa fa-credit-card\"></i> Acepta tarjetas</p>':\"\")+\n            '<div class=\"map-button-block\">'+\n              '<button class=\"map-button whatsapp\" type=\"submit\" value=\"Write\" onclick=\"writeAction('+marker.cellphone+')\"><i class=\"fa fa-whatsapp\"></i> Escribir</button>'+\n            '</div>'+\n          '</div>'\n        );\n        this.infoWindow.open(map, marker); \n      }                     \n    });\n\n    google.maps.event.addListener(marker, 'mouseover', function() {\n      marker.setIcon(icon_hover);\n    });\n\n    google.maps.event.addListener(marker, 'mouseout', function() {\n      marker.setIcon(icon_normal);    \n    });\n\n    marker.setMap(this.map);\n  }\n\n  render () {\n    var customStyle = {\n      padding:\"0\",\n      margin:\"0\",\n      display: 'block',\n      height: '97vh',\n      \n      background:'WhiteSmoke'\n    }\n    \n    return (\n      <div>\n        <Head>\n          <script src=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyBt0ZCE1kAklBJiBnCYGX6kl0tglLcKlLI\"></script>\n        </Head>\n        <div id=\"map\" style={customStyle}>Cargando...</div>\n      </div>\n    )\n  }\n}\n\nexport default Map\n"]},"metadata":{},"sourceType":"module"}