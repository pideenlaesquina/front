{"ast":null,"code":"var _jsxFileName = \"/home/crmock/pideenlaequina/front/components/map.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Head from 'next/head';\nimport AddressBar from '../components/addressBar.js';\nimport NoStores from '../components/noStores.js';\n\nclass Map extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      map: null,\n      userMarker: null,\n      storeMarkers: []\n    };\n  }\n\n  shouldComponentUpdate() {\n    if (this.props.pos === null) {\n      return false;\n    }\n\n    return true;\n  }\n\n  componentDidUpdate() {\n    let map = getMap();\n    let userMarker = placeUserMarker(map, this.props.pos);\n    removeAllStoreMarkers();\n    let storeMarkers = placeAllStoreMarkers(map, this.props.stores);\n    this.setState({\n      map: map,\n      userMarker: userMarker,\n      storeMarkers: storeMarkers\n    });\n  }\n\n  getMap() {\n    let newMap = null;\n\n    if (state.map == null) {\n      newMap = new google.maps.Map(document.getElementById('map'), {\n        center: props.pos,\n        zoom: 15,\n        mapTypeControl: false,\n        fullscreenControl: false,\n        clickableIcons: false,\n        streetViewControl: false\n      });\n    } else {\n      newMap = state.map;\n    }\n\n    return newMap;\n  }\n\n  placeUserMarker(map, pos) {\n    if (this.state.userMarker != null) {\n      this.state.userMarker.setMap(null);\n    }\n\n    marker = new google.maps.Marker({\n      position: pos,\n      icon: './map/user_icon.svg',\n      title: \"Tu ubicación\",\n      draggable: false\n    });\n    marker.setMap(map);\n    this.panToPos(map, pos);\n    return marker;\n  }\n\n  panToPos(map, pos) {\n    map.panTo(this.props);\n  }\n\n  placeAllStoreMarkers(map, stores) {\n    let storeMarkers = [];\n\n    for (let i = 0; i < stores.length; i++) {\n      let store = storeList[i];\n\n      if (store._id == null || store.lat == null || store.lng == null || store.name == null) {\n        console.log(\"Skiped store: \" + store.name);\n        continue;\n      }\n\n      let marker = placeAStoreMarker(map, store);\n      storeMarkers.push(marker);\n    }\n\n    return storeMarkers;\n  }\n\n  removeAllStoreMarkers() {\n    for (let i = 0; i < this.state.storeMarkers.length; i++) {\n      props.stores[i].setMap(null);\n    }\n  }\n\n  placeAStoreMarker(map, store) {\n    store.type = store.type == null ? \"store\" : store.type.toLowerCase();\n    let icon_normal = './map/' + store.type + \"_icon.svg\";\n    let icon_hover = './map/' + store.type + \"_icon_hover.svg\";\n    let marker = new google.maps.Marker({\n      position: {\n        lat: store.lat,\n        lng: store.lng\n      },\n      icon: icon_normal,\n      title: store.name,\n      draggable: false,\n      id: store.id //custom data\n\n    });\n    google.maps.event.addListener(marker, 'click', function () {\n      console.log(\"click \" + marker.id);\n    });\n    google.maps.event.addListener(marker, 'mouseover', function () {\n      marker.setIcon(icon_hover);\n    });\n    google.maps.event.addListener(marker, 'mouseout', function () {\n      marker.setIcon(icon_normal);\n    });\n    marker.setMap(map);\n    return marker;\n  }\n\n  render() {\n    let customStyle = {\n      padding: \"0\",\n      margin: \"0\",\n      display: 'flex',\n      height: '97vh',\n      alignItems: 'center',\n      justifyContent: 'center',\n      background: 'WhiteSmoke'\n    };\n    let imageStyle = {\n      width: \"50%\",\n      marginLeft: \"auto\",\n      marginRight: \"auto\"\n    };\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 7\n      }\n    }, __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }\n    }, __jsx(\"script\", {\n      src: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyBt0ZCE1kAklBJiBnCYGX6kl0tglLcKlLI\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      id: \"map\",\n      style: customStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 11\n      }\n    }, __jsx(\"img\", {\n      src: \"/loading.svg\",\n      alt: \"Pajarito escuchando m\\xFAsica feliz\",\n      style: imageStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }\n    })), this.state.map ? __jsx(AddressBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 14\n      }\n    }) : \"\", this.state.map && this.props.stores.length == 0 ? __jsx(NoStores, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 14\n      }\n    }) : \"\"));\n  }\n\n}\n\nexport default Map;","map":{"version":3,"sources":["/home/crmock/pideenlaequina/front/components/map.js"],"names":["React","ReactDOM","Head","AddressBar","NoStores","Map","Component","constructor","props","state","map","userMarker","storeMarkers","shouldComponentUpdate","pos","componentDidUpdate","getMap","placeUserMarker","removeAllStoreMarkers","placeAllStoreMarkers","stores","setState","newMap","google","maps","document","getElementById","center","zoom","mapTypeControl","fullscreenControl","clickableIcons","streetViewControl","setMap","marker","Marker","position","icon","title","draggable","panToPos","panTo","i","length","store","storeList","_id","lat","lng","name","console","log","placeAStoreMarker","push","type","toLowerCase","icon_normal","icon_hover","id","event","addListener","setIcon","render","customStyle","padding","margin","display","height","alignItems","justifyContent","background","imageStyle","width","marginLeft","marginRight"],"mappings":"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","sourcesContent":["import React from 'react'\nimport ReactDOM from 'react-dom'\nimport Head from 'next/head'\nimport AddressBar from '../components/addressBar.js'\nimport NoStores from '../components/noStores.js'\n\nclass Map extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      map: null,\n      userMarker: null,\n      storeMarkers:[]\n    }\n  }\n\n  shouldComponentUpdate() {\n    if(this.props.pos === null)\n    {\n      return false\n    }\n    return true\n  }\n\n  componentDidUpdate()\n  {\n    let map=getMap()\n    let userMarker=placeUserMarker(map, this.props.pos)\n    removeAllStoreMarkers()\n    let storeMarkers = placeAllStoreMarkers(map, this.props.stores)\n\n    this.setState({\n      map: map,\n      userMarker: userMarker,\n      storeMarkers:storeMarkers\n    })\n  }\n\n  getMap()\n  {\n    let newMap = null\n    if(state.map == null)\n    {\n      newMap = new google.maps.Map(document.getElementById('map'), {\n        center: props.pos,\n        zoom: 15,\n        mapTypeControl: false,\n        fullscreenControl: false,\n        clickableIcons: false,\n        streetViewControl: false,\n      })\n    }\n    else\n    {\n      newMap = state.map\n    }\n\n    return newMap\n  }\n\n  placeUserMarker(map, pos)\n  {\n    if(this.state.userMarker != null)\n    {\n      this.state.userMarker.setMap(null);\n    }\n\n    marker = new google.maps.Marker({\n      position: pos,\n      icon: './map/user_icon.svg',\n      title: \"Tu ubicación\",\n      draggable:false,\n    })\n\n    marker.setMap(map);\n    this.panToPos(map, pos)\n    return marker\n  }\n\n  panToPos(map, pos)\n  {\n    map.panTo(this.props);\n  }\n\n  placeAllStoreMarkers(map, stores)\n  {\n    let storeMarkers = []\n    \n    for (let i = 0; i < stores.length; i++) {\n      let store = storeList[i]\n      if(store._id == null || store.lat == null || store.lng == null || store.name == null)\n      {\n        console.log(\"Skiped store: \"+store.name)\n        continue\n      }\n\n      let marker = placeAStoreMarker(map, store)\n      storeMarkers.push(marker)\n    }\n\n    return storeMarkers\n  }\n\n  removeAllStoreMarkers()\n  {\n    for (let i = 0; i < this.state.storeMarkers.length; i++)\n    {\n      props.stores[i].setMap(null)\n    }\n  }\n\n  placeAStoreMarker(map, store)\n  {\n    store.type = (store.type==null?\"store\":store.type.toLowerCase())\n    let icon_normal = './map/' + store.type + \"_icon.svg\";\n    let icon_hover = './map/' + store.type + \"_icon_hover.svg\";\n    \n    let marker = new google.maps.Marker({\n      position: {lat:store.lat, lng:store.lng},\n      icon: icon_normal,\n      title:store.name,\n      draggable:false,\n      id:store.id, //custom data\n    })\n\n    google.maps.event.addListener(marker, 'click', function() {\n      console.log(\"click \" +marker.id)       \n    })\n\n    google.maps.event.addListener(marker, 'mouseover', function() {\n      marker.setIcon(icon_hover);\n    })\n\n    google.maps.event.addListener(marker, 'mouseout', function() {\n      marker.setIcon(icon_normal);    \n    })\n\n    marker.setMap(map)\n    return marker\n  }\n\n  render () {\n    let customStyle = {\n      padding:\"0\",\n      margin:\"0\",\n      display: 'flex',\n      height: '97vh',\n\n      alignItems:'center', \n      justifyContent: 'center',\n      \n      background:'WhiteSmoke'\n    }\n\n    let imageStyle = {\n      width: \"50%\",\n      marginLeft:\"auto\",\n      marginRight: \"auto\"\n    }\n    \n    return (\n      <div>\n        <Head>\n          <script src=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyBt0ZCE1kAklBJiBnCYGX6kl0tglLcKlLI\"></script>\n        </Head>\n        <div>\n          <div id=\"map\" style={customStyle}>\n            <img src=\"/loading.svg\" alt=\"Pajarito escuchando música feliz\" style={imageStyle}></img>\n          </div>\n          {this.state.map\n            ?<AddressBar/>\n            :\"\"\n          }\n          {this.state.map && this.props.stores.length==0\n            ?<NoStores/>\n            :\"\"\n          }\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Map\n"]},"metadata":{},"sourceType":"module"}