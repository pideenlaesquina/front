{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/crmock/pideenlaequina/front/components/map.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Head from 'next/head';\n\nvar Map = /*#__PURE__*/function (_React$Component) {\n  _inherits(Map, _React$Component);\n\n  var _super = _createSuper(Map);\n\n  function Map(props) {\n    var _this;\n\n    _classCallCheck(this, Map);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      map: null,\n      userMarker: null\n    };\n    return _this;\n  }\n\n  _createClass(Map, [{\n    key: \"setUserMarker\",\n    value: function setUserMarker(pos, map) {\n      this.state.userMarker.setMap(null);\n      var marker = new google.maps.Marker({\n        position: pos,\n        icon: './map/user_icon.svg',\n        title: \"Tu ubicación\",\n        draggable: false\n      });\n      marker.setMap(map);\n      map.panTo(pos);\n      return marker;\n    }\n  }, {\n    key: \"setStoresMarkers\",\n    value: function setStoresMarkers(stores, map) {\n      var _loop = function _loop(i) {\n        store = stores[i];\n\n        if (store.id == null || store.lat == null || store.lng == null || store.name == null) {\n          console.log(\"Skiped store #\" + i);\n          return \"continue\";\n        }\n\n        store.type = store.type == null ? \"store\" : store.type.toLowerCase();\n        var icon_normal = './map/' + store.type + \"_icon.svg\";\n        var icon_hover = './map/' + store.type + \"_icon_hover.svg\";\n        var marker = new google.maps.Marker({\n          position: {\n            lat: store.lat,\n            lng: store.lng\n          },\n          icon: icon_normal,\n          title: store.name,\n          draggable: false,\n          id: store.id //custom data\n\n        });\n        google.maps.event.addListener(marker, 'click', function () {\n          console.log(\"click \" + marker.id);\n        });\n        google.maps.event.addListener(marker, 'mouseover', function () {\n          marker.setIcon(icon_hover);\n        });\n        google.maps.event.addListener(marker, 'mouseout', function () {\n          marker.setIcon(icon_normal);\n        });\n        marker.setMap(map);\n      };\n\n      for (var i = 0; i < stores.length; i++) {\n        var _ret = _loop(i);\n\n        if (_ret === \"continue\") continue;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var customStyle = {\n        padding: \"0\",\n        margin: \"0\",\n        display: 'block',\n        height: '97vh',\n        background: 'WhiteSmoke'\n      };\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 7\n        }\n      }, __jsx(Head, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 9\n        }\n      }, __jsx(\"script\", {\n        src: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyBt0ZCE1kAklBJiBnCYGX6kl0tglLcKlLI\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }\n      })), __jsx(\"div\", {\n        id: \"map\",\n        style: customStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 9\n        }\n      }, \"Cargando...\"));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var newMap = null;\n      var newUserMarker = null;\n\n      if (typeof google !== 'undefined' && props.pos != null && props.pos.lat != null && props.pos.lng != null) {\n        if (state.map == null) {\n          newMap = new google.maps.Map(document.getElementById('map'), {\n            center: props.pos,\n            zoom: 15,\n            mapTypeControl: false,\n            fullscreenControl: false\n          });\n        } else {\n          newMap = state.map;\n        }\n\n        newUserMarker = this.setUserMarker(props.pos, newMap);\n\n        if (Array.isArray(props.stores) && props.stores.length) {\n          setStoresMarkers(props.stores, newMap);\n        }\n      }\n\n      return {\n        map: newMap,\n        userMarker: newUserMarker\n      };\n    }\n  }]);\n\n  return Map;\n}(React.Component);\n\nexport default Map;","map":{"version":3,"sources":["/home/crmock/pideenlaequina/front/components/map.js"],"names":["React","ReactDOM","Head","Map","props","state","map","userMarker","pos","setMap","marker","google","maps","Marker","position","icon","title","draggable","panTo","stores","i","store","id","lat","lng","name","console","log","type","toLowerCase","icon_normal","icon_hover","event","addListener","setIcon","length","customStyle","padding","margin","display","height","background","newMap","newUserMarker","document","getElementById","center","zoom","mapTypeControl","fullscreenControl","setUserMarker","Array","isArray","setStoresMarkers","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Head from 'next/head'\n\nclass Map extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      map: null,\n      userMarker: null\n    }\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    let newMap = null\n    let newUserMarker = null\n\n    if(typeof google !== 'undefined' && props.pos != null && props.pos.lat != null && props.pos.lng != null) \n    {\n      if(state.map == null)\n      {\n        newMap = new google.maps.Map(document.getElementById('map'), {\n          center: props.pos,\n          zoom: 15,\n          mapTypeControl: false,\n          fullscreenControl: false,\n        })\n      }\n      else\n      {\n        newMap = state.map\n      }\n\n      newUserMarker = this.setUserMarker(props.pos, newMap)\n\n      if(Array.isArray(props.stores) && props.stores.length)\n      {\n        setStoresMarkers(props.stores, newMap)\n      }\n    }\n\n    return {\n      map: newMap,\n      userMarker: newUserMarker\n    }\n  }\n\n  setUserMarker(pos, map)\n  {\n    this.state.userMarker.setMap(null);\n\n    let marker = new google.maps.Marker({\n      position: pos,\n      icon: './map/user_icon.svg',\n      title: \"Tu ubicación\",\n      draggable:false,\n    })\n\n    marker.setMap(map);\n    map.panTo(pos);\n\n    return marker\n  }\n\n  setStoresMarkers(stores, map)\n  {\n    for (let i = 0; i < stores.length; i++) {\n      store = stores[i]\n\n      if(store.id == null || store.lat == null || store.lng == null || store.name == null)\n      {\n        console.log(\"Skiped store #\"+i)\n        continue\n      }\n\n      store.type = (store.type==null?\"store\":store.type.toLowerCase())\n      let icon_normal = './map/' + store.type + \"_icon.svg\";\n      let icon_hover = './map/' + store.type + \"_icon_hover.svg\";\n      \n      let marker = new google.maps.Marker({\n        position: {lat:store.lat, lng:store.lng},\n        icon: icon_normal,\n        title:store.name,\n        draggable:false,\n        id:store.id, //custom data\n      })\n\n      google.maps.event.addListener(marker, 'click', function() {\n        console.log(\"click \" +marker.id)       \n      })\n\n      google.maps.event.addListener(marker, 'mouseover', function() {\n        marker.setIcon(icon_hover);\n      })\n  \n      google.maps.event.addListener(marker, 'mouseout', function() {\n        marker.setIcon(icon_normal);    \n      })\n  \n      marker.setMap(map)\n    }\n  }\n\n  render () {\n    var customStyle = {\n      padding:\"0\",\n      margin:\"0\",\n      display: 'block',\n      height: '97vh',\n      \n      background:'WhiteSmoke'\n    }\n    \n    return (\n      <div>\n        <Head>\n          <script src=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyBt0ZCE1kAklBJiBnCYGX6kl0tglLcKlLI\"></script>\n        </Head>\n        <div id=\"map\" style={customStyle}>Cargando...</div>\n      </div>\n    )\n  }\n}\n\nexport default Map\n"]},"metadata":{},"sourceType":"module"}