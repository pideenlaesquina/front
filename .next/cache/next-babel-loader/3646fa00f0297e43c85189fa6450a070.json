{"ast":null,"code":"\"use strict\";\n\nvar _mongodb = _interopRequireDefault(require(\"../../middleware/mongodb.js\"));\n\nvar _isomorphicUnfetch = _interopRequireDefault(require(\"isomorphic-unfetch\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// The main, exported, function of the endpoint,\n// dealing with the request and subsequent response\nmodule.exports = async (req, res) => {\n  // Get a database connection, cached or otherwise,\n  // using the connection string environment variable as the argument\n  const db = await (0, _mongodb.default)();\n  let rawdata = fs.readFileSync('../../bavaria.json');\n  let student = JSON.parse(rawdata); //   for (let index = 0; index < stores.length; index++) {\n  //     const element = stores[index]\n  //     const googlemaps_address = element.googlemaps_address;\n  //     if(googlemaps_address!=null && googlemaps_address!=\"\")\n  //     {\n  //       let url = process.env.GOOGLE_MAPS_API_URL + \"?address=\"+googlemaps_address+\"&key=\"+process.env.GOOGLE_MAPS_API_KEY\n  //       let res = await fetch(url)\n  //       let jres = await res.json()\n  //       let place = jres.results[0]\n  //       if(place!=null)\n  //       {\n  //         collection.update({_id:element._id}, {$set:{lat:place.geometry.location.lat, lng:place.geometry.location.lng, googlemaps_formatted_address:place.formatted_address, googlemaps_place_id:place.place_id}});\n  //         counter++\n  //       }\n  //       else{\n  //         console.log(googlemaps_address)\n  //         console.log(jres)\n  //       }\n  //     } \n  //   }\n  // Respond with a JSON string of all stores in the collection\n\n  res.status(200).json({\n    updated_entities: counter\n  });\n};","map":{"version":3,"sources":["/home/crmock/pideenlaequina/front/pages/api/upload.js"],"names":["module","exports","req","res","db","rawdata","fs","readFileSync","student","JSON","parse","status","json","updated_entities","counter"],"mappings":";;AAAA;;AACA;;;;AAEA;AACA;AACAA,MAAM,CAACC,OAAP,GAAiB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACnC;AACA;AACA,QAAMC,EAAE,GAAG,MAAM,uBAAjB;AAEA,MAAIC,OAAO,GAAGC,EAAE,CAACC,YAAH,CAAgB,oBAAhB,CAAd;AACA,MAAIC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWL,OAAX,CAAd,CANmC,CAQrC;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEE;;AACAF,EAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,IAAAA,gBAAgB,EAACC;AAAlB,GAArB;AACD,CAnCD","sourcesContent":["import Database from '../../middleware/mongodb.js'\nimport fetch from 'isomorphic-unfetch'\n\n// The main, exported, function of the endpoint,\n// dealing with the request and subsequent response\nmodule.exports = async (req, res) => {\n  // Get a database connection, cached or otherwise,\n  // using the connection string environment variable as the argument\n  const db = await Database()\n\n  let rawdata = fs.readFileSync('../../bavaria.json');\n  let student = JSON.parse(rawdata);\n\n//   for (let index = 0; index < stores.length; index++) {\n//     const element = stores[index]\n//     const googlemaps_address = element.googlemaps_address;\n\n//     if(googlemaps_address!=null && googlemaps_address!=\"\")\n//     {\n      \n//       let url = process.env.GOOGLE_MAPS_API_URL + \"?address=\"+googlemaps_address+\"&key=\"+process.env.GOOGLE_MAPS_API_KEY\n//       let res = await fetch(url)\n//       let jres = await res.json()\n\n//       let place = jres.results[0]\n\n//       if(place!=null)\n//       {\n//         collection.update({_id:element._id}, {$set:{lat:place.geometry.location.lat, lng:place.geometry.location.lng, googlemaps_formatted_address:place.formatted_address, googlemaps_place_id:place.place_id}});\n//         counter++\n//       }\n//       else{\n//         console.log(googlemaps_address)\n//         console.log(jres)\n//       }\n//     } \n//   }\n\n  // Respond with a JSON string of all stores in the collection\n  res.status(200).json({updated_entities:counter})\n}"]},"metadata":{},"sourceType":"script"}